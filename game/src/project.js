window.__require=function e(t,n,i){function a(o,c){if(!n[o]){if(!t[o]){var r=o.split("/");if(r=r[r.length-1],!t[r]){var l="function"==typeof __require&&__require;if(!c&&l)return l(r,!0);if(s)return s(r,!0);throw new Error("Cannot find module '"+o+"'")}}var u=n[o]={exports:{}};t[o][0].call(u.exports,function(e){return a(t[o][1][e]||e)},u,u.exports,e,t,n,i)}return n[o].exports}for(var s="function"==typeof __require&&__require,o=0;o<i.length;o++)a(i[o]);return a}({DoDiffusionTest:[function(e,t,n){"use strict";cc._RF.push(t,"7f3d8aEJl9GmrTCiwVDYKcA","DoDiffusionTest"),cc.Class({extends:cc.Component,properties:{nameLabel:{default:null,type:cc.Label},coinLabel:cc.Label,hintLabel:cc.Label,progressBar:cc.ProgressBar,avatarSprite:{default:null,type:cc.Sprite},diffusion:{default:null,type:cc.Node}},onLoad:function(){var e=cc.find("player").getComponent("Player");this.nameLabel.string=e.nickName,this.coinLabel.string=e.coinsOwned.toString();var t=this;cc.loader.loadRes(e.avatarImgDir+"_s",cc.SpriteFrame,function(e,n){t.avatarSprite.spriteFrame=n}),insertNewAction(G.globalSocket,G.user.username,G.sequenceCnt,"diffusion","init","na","na",0,G.user.coins);Alert.show(1.6,"\u6269\u6563\u5b9e\u9a8c","\u6b22\u8fce\u6765\u5230\u6269\u6563\u5b9e\u9a8c\u5ba4\uff01\u63a5\u4e0b\u6765\u8bf7\u7528U\u578b\u7ba1\u5b8c\u6210\u4e00\u4e2a\u6db2\u4f53\u6269\u6563\u5b9e\u9a8c\uff0c\u5b8c\u6210\u5b9e\u9a8c\u5c06\u6709\u4e30\u539a\u91d1\u5e01\u5956\u52b1\u3002\u8d2d\u4e70\u3001\u4f7f\u7528\u6750\u6599\u5747\u9700\u82b1\u8d39\u91d1\u5e01\uff0c\u8003\u8651\u540e\u518d\u505a\u9009\u62e9\u54e6\u3002",function(){insertNewAction(G.globalSocket,G.user.username,G.sequenceCnt,"diffusion","read","introduction","na",0,G.user.coins)},!1),this.progressBar.progress=0,this.hintLabel.node.color=new cc.color(83,111,122,255),this.hintLabel.string="\u8bf7\u8d2d\u4e70\u4f7f\u7528\u5408\u9002\u7684\u4eea\u5668\u548c\u6eb6\u8d28",this.checkMaterial()},backToMapScene:function(){this.resetScene(),cc.director.loadScene("LevelMap"),insertNewAction(G.globalSocket,G.user.username,G.sequenceCnt,"diffusion","back","na","na",0,G.user.coins)},readyToBuyMaterial:function(e,t){var n=t.split("_",4),i=Number(n[0]),a=(n[1],Number(n[2])),s=n[3],o=cc.find("player").getComponent("Player");if(o.materialOwned.has(a))if(o.materialUsed.has(a)){console.log("is used");var c="\u4f60\u8981\u6536\u56de"+n[1]+"\u5417\uff1f",r=this;Alert.show(1,"\u6536\u56de",c,function(){r.afterBacking(a,s),insertNewAction(G.globalSocket,G.user.username,G.sequenceCnt,"diffusion","takeback",n[1],"na",0,G.user.coins)})}else if(o.materialUsedClass.has(s)){console.log("owned, can not used");c="\u4f60\u5df2\u4f7f\u7528\u540c\u7c7b\u7269\u54c1\uff0c\u8bf7\u6536\u56de\u540e\u518d\u4f7f\u7528\u8be5\u7269\u54c1\u3002";Alert.show(1,"\u63d0\u793a",c,function(){insertNewAction(G.globalSocket,G.user.username,G.sequenceCnt,"diffusion","refuseusing",n[1],"na",0,G.user.coins)},!1)}else{console.log("owned, can use, but not used");c="\u4f60\u8981\u82b1\u8d3920\u91d1\u5e01\u4f7f\u7528"+n[1]+"\u5417\uff1f",r=this;Alert.show(1,"\u4f7f\u7528",c,function(){r.afterUsing(a,n[1],s)})}else{console.log("Not owned.");c="\u4f60\u8981\u82b1\u8d39"+n[0]+"\u91d1\u5e01\u8d2d\u4e70"+n[1]+"\u5417\uff1f",r=this;Alert.show(1,"\u8d2d\u4e70",c,function(){r.afterBuying(i,a),insertNewAction(G.globalSocket,G.user.username,G.sequenceCnt,"diffusion","buy",n[1],"penalty",i,G.user.coins)})}},readyToDiffuse:function(){this.diffusion.getComponent(cc.Animation).play("uDiffAni")},afterBuying:function(e,t){console.log("\u8d2d\u4e70\u786e\u5b9a\u6309\u94ae\u88ab\u70b9\u51fb!"),this.coinAnimation();var n=cc.find("player").getComponent("Player");n.updateCoins(-1*e),n.materialOwned.add(t),this.coinLabel.string=n.coinsOwned.toString(),this.setMaterialOwned(t)},afterUsing:function(e,t,n){var i=cc.find("player").getComponent("Player");if(this.coinAnimation(),i.updateCoins(-20),this.coinLabel.string=i.coinsOwned.toString(),"a"==n)if(1==e){this.setMaterialUsed(e),i.materialUsed.add(e),i.materialUsedClass.add(n);var a="Canvas/container/c"+e.toString();cc.find(a).active=!0,this.hintLabel.node.color=new cc.color(4,84,114,255),this.hintLabel.string="\u8bf7\u7ee7\u7eed\u6311\u9009\u4f7f\u7528\u5408\u9002\u7684\u6eb6\u8d28",this.progressBar.progress+=.5,insertNewAction(G.globalSocket,G.user.username,G.sequenceCnt,"diffusion","use",t,"penalty",20,G.user.coins)}else this.hintLabel.node.color=new cc.color(255,50,50,255),this.hintLabel.string="\u6b64\u4eea\u5668\u4e0d\u7b26\u5408\u8981\u6c42\uff0c\u8bd5\u8bd5\u5176\u4ed6\u7684\u5427",insertNewAction(G.globalSocket,G.user.username,G.sequenceCnt,"diffusion","wronguse",t,"penalty",20,G.user.coins);"c"==n&&(i.materialUsed.has(1)?4==e?(insertNewAction(G.globalSocket,G.user.username,G.sequenceCnt,"diffusion","use",t,"penalty",20,G.user.coins),this.setMaterialUsed(e),i.materialUsed.add(e),i.materialUsedClass.add(n),this.diffusion.getComponent(cc.Animation).play("uDiffAni"),this.progressBar.progress+=.5,this.hintLabel.node.color=new cc.color(4,84,114,255),this.hintLabel.string="\u505a\u7684\u597d\uff0c\u6269\u6563\u5b9e\u9a8c\u5b8c\u6210",G.isDiffDone=!0,i.updateCoins(250),this.coinLabel.string=i.coinsOwned.toString(),insertNewAction(G.globalSocket,G.user.username,G.sequenceCnt,"diffusion","finish","na","reward",250,G.user.coins)):(this.hintLabel.node.color=new cc.color(255,50,50,255),this.hintLabel.string="\u6b64\u6750\u6599\u4e0d\u7b26\u5408\u8981\u6c42\uff0c\u8bd5\u8bd5\u5176\u4ed6\u7684\u5427",insertNewAction(G.globalSocket,G.user.username,G.sequenceCnt,"diffusion","wronguse",t,"penalty",20,G.user.coins)):(this.hintLabel.node.color=new cc.color(255,50,50,255),this.hintLabel.string="\u8bf7\u5148\u6311\u9009\u4f7f\u7528\u5408\u9002\u7684\u5b9e\u9a8c\u4eea\u5668"));"b"==n&&(this.hintLabel.node.color=new cc.color(255,50,50,255),this.hintLabel.string="\u8be5\u5b9e\u9a8c\u4e0d\u9700\u8981\u6b64\u6750\u6599",insertNewAction(G.globalSocket,G.user.username,G.sequenceCnt,"diffusion","wronguse",t,"penalty",20,G.user.coins))},afterBacking:function(e,t){var n="Canvas/materialBackground/m"+e.toString()+"Button";cc.find(n+"/isOwned").getComponent(cc.Sprite).setState(0);var i=cc.find("player").getComponent("Player");if(i.materialUsed.delete(e),i.materialUsedClass.delete(t),"a"==t){var a="Canvas/container/c"+e.toString();cc.find(a).active=!1,1==e&&(this.progressBar.progress-=.5)}},checkMaterial:function(){var e=cc.find("player").getComponent("Player"),t=!0,n=!1,i=void 0;try{for(var a,s=e.materialOwned[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){var o=a.value;this.setMaterialOwned(o)}}catch(e){n=!0,i=e}finally{try{!t&&s.return&&s.return()}finally{if(n)throw i}}var c=!0,r=!1,l=void 0;try{for(var u,d=e.materialUsed[Symbol.iterator]();!(c=(u=d.next()).done);c=!0){o=u.value;this.setMaterialUsed(o)}}catch(e){r=!0,l=e}finally{try{!c&&d.return&&d.return()}finally{if(r)throw l}}},setMaterialOwned:function(e){var t="Canvas/materialBackground/m"+e.toString()+"Button";cc.find(t+"/isOwned").active=!0},setMaterialUsed:function(e){var t="Canvas/materialBackground/m"+e.toString()+"Button";cc.find(t+"/isOwned").getComponent(cc.Sprite).setState(1)},coinAnimation:function(){var e=cc.find("Canvas/coin"),t=cc.sequence(cc.scaleTo(.3,.7),cc.scaleTo(.3,1),cc.scaleTo(.3,.7),cc.scaleTo(.3,1));e.runAction(t)},resetScene:function(){var e=cc.find("player").getComponent("Player");e.materialUsed.clear(),e.materialUsedClass.clear(),insertNewAction(G.globalSocket,G.user.username,G.sequenceCnt,"diffusion","reset","na","na",0,G.user.coins)},start:function(){}}),cc._RF.pop()},{}],DoOsmosisTest:[function(e,t,n){"use strict";cc._RF.push(t,"643fdDwJdxFvLqYaBj6333z","DoOsmosisTest"),cc.Class({extends:cc.Component,properties:{nameLabel:{default:null,type:cc.Label},coinLabel:cc.Label,hintLabel:cc.Label,progressBar:cc.ProgressBar,avatarSprite:{default:null,type:cc.Sprite},osmosisLeft:{default:null,type:cc.Node},osmosisRight:{default:null,type:cc.Node},sodium:{default:null,type:cc.Node}},onLoad:function(){var e=cc.find("player").getComponent("Player");this.nameLabel.string=e.nickName,this.coinLabel.string=e.coinsOwned.toString();var t=this;cc.loader.loadRes(e.avatarImgDir+"_s",cc.SpriteFrame,function(e,n){t.avatarSprite.spriteFrame=n});Alert.show(2,"\u6e17\u900f\u4f5c\u7528","\u6e17\u900f\u4f5c\u7528\u662f\u6307\u4e24\u79cd\u4e0d\u540c\u6d53\u5ea6\u7684\u6eb6\u6db2\u9694\u4ee5\u534a\u900f\u819c\uff08\u5141\u8bb8\u6eb6\u5242\u5206\u5b50\u901a\u8fc7\uff0c\u4e0d\u5141\u8bb8\u6eb6\u8d28\u5206\u5b50\u901a\u8fc7\u7684\u819c\uff09\uff0c\u6c34\u5206\u5b50\u6216\u5176\u5b83\u6eb6\u5242\u5206\u5b50\u4ece\u4f4e\u6d53\u5ea6\u7684\u6eb6\u6db2\u901a\u8fc7\u534a\u900f\u819c\u8fdb\u5165\u9ad8\u6d53\u5ea6\u6eb6\u6db2\u4e2d\u7684\u73b0\u8c61\u3002",null,!1),this.progressBar.progress=0,this.hintLabel.node.color=new cc.color(83,111,122,255),this.hintLabel.string="\u8bf7\u8d2d\u4e70\u4f7f\u7528\u5408\u9002\u7684\u4eea\u5668\u548c\u6eb6\u8d28",this.checkMaterial()},backToMapScene:function(){this.resetScene(),cc.director.loadScene("LevelMap")},readyToBuyMaterial:function(e,t){var n=t.split("_",4),i=Number(n[0]),a=(n[1],Number(n[2])),s=n[3],o=cc.find("player").getComponent("Player");if(o.materialOwned.has(a))if(o.materialUsed.has(a)){console.log("is used");var c="\u4f60\u8981\u6536\u56de"+n[1]+"\u5417\uff1f",r=this;Alert.show(1,"\u6536\u56de",c,function(){r.afterBacking(a,s)})}else if(o.materialUsedClass.has(s)){console.log("owned, can not used");c="\u4f60\u5df2\u4f7f\u7528\u540c\u7c7b\u7269\u54c1\uff0c\u8bf7\u6536\u56de\u540e\u518d\u4f7f\u7528\u8be5\u7269\u54c1\u3002",r=this;Alert.show(1,"\u63d0\u793a",c,null,!1)}else{console.log("owned, can use, but not used");c="\u4f60\u8981\u82b1\u8d3920\u91d1\u5e01\u4f7f\u7528"+n[1]+"\u5417\uff1f",r=this;Alert.show(1,"\u4f7f\u7528",c,function(){r.afterUsing(a,s)})}else{console.log("Not owned.");c="\u4f60\u8981\u82b1\u8d39"+n[0]+"\u91d1\u5e01\u8d2d\u4e70"+n[1]+"\u5417\uff1f",r=this;Alert.show(1,"\u8d2d\u4e70",c,function(){r.afterBuying(i,a)})}},readyToDiffuse:function(){this.diffusion.getComponent(cc.Animation).play("diffusionAni")},afterBuying:function(e,t){console.log("\u8d2d\u4e70\u786e\u5b9a\u6309\u94ae\u88ab\u70b9\u51fb!"),this.coinAnimation();var n=cc.find("player").getComponent("Player");n.coinsOwned=n.coinsOwned-e,n.materialOwned.add(t),this.coinLabel.string=n.coinsOwned.toString(),this.setMaterialOwned(t)},afterUsing:function(e,t){var n=cc.find("player").getComponent("Player");if(this.coinAnimation(),n.coinsOwned=n.coinsOwned-20,this.coinLabel.string=n.coinsOwned.toString(),"a"==t)if(2==e){this.setMaterialUsed(e),n.materialUsed.add(e),n.materialUsedClass.add(t);var i="Canvas/container/c"+e.toString();cc.find(i).active=!0,this.hintLabel.node.color=new cc.color(4,84,114,255),this.hintLabel.string="\u8bf7\u7ee7\u7eed\u6311\u9009\u4f7f\u7528\u5408\u9002\u7684\u6750\u6599",this.progressBar.progress+=.33}else this.hintLabel.node.color=new cc.color(255,50,50,255),this.hintLabel.string="\u6b64\u4eea\u5668\u4e0d\u7b26\u5408\u8981\u6c42\uff0c\u8bd5\u8bd5\u5176\u4ed6\u7684\u5427";if("b"==t)if(n.materialUsed.has(2))if(6==e){this.setMaterialUsed(e),n.materialUsed.add(e),n.materialUsedClass.add(t);i="Canvas/container/c2/membrane";cc.find(i).active=!0,this.hintLabel.node.color=new cc.color(4,84,114,255),this.hintLabel.string="\u8bf7\u7ee7\u7eed\u6311\u9009\u4f7f\u7528\u5408\u9002\u7684\u6eb6\u8d28",this.progressBar.progress+=.33}else this.hintLabel.node.color=new cc.color(255,50,50,255),this.hintLabel.string="\u6b64\u6750\u6599\u4e0d\u7b26\u5408\u8981\u6c42\uff0c\u8bd5\u8bd5\u5176\u4ed6\u7684\u5427";else this.hintLabel.node.color=new cc.color(255,50,50,255),this.hintLabel.string="\u8bf7\u5148\u6311\u9009\u4f7f\u7528\u5408\u9002\u7684\u5b9e\u9a8c\u5bb9\u5668";"c"==t&&(n.materialUsed.has(6)?7==e?(this.setMaterialUsed(e),n.materialUsed.add(e),n.materialUsedClass.add(t),this.osmosisLeft.getComponent(cc.Animation).play("leftAni"),this.osmosisRight.getComponent(cc.Animation).play("rightAni"),this.sodium.getComponent(cc.Animation).play("sodiumAni"),this.progressBar.progress=1,this.hintLabel.node.color=new cc.color(4,84,114,255),this.hintLabel.string="\u505a\u7684\u597d\uff0c\u6e17\u900f\u5b9e\u9a8c\u5b8c\u6210",G.isOsmoDone=!0,n.coinsOwned=n.coinsOwned+250,this.coinLabel.string=n.coinsOwned.toString()):this.hintLabel.string="\u6b64\u6750\u6599\u4e0d\u7b26\u5408\u8981\u6c42\uff0c\u8bd5\u8bd5\u5176\u4ed6\u7684\u5427":(this.hintLabel.node.color=new cc.color(255,50,50,255),this.hintLabel.string="\u8bf7\u5148\u6311\u9009\u4f7f\u7528\u5408\u9002\u7684\u5b9e\u9a8c\u5bb9\u5668\u6216\u8005\u6750\u6599"))},afterBacking:function(e,t){var n="Canvas/materialBackground/m"+e.toString()+"Button";cc.find(n+"/isOwned").getComponent(cc.Sprite).setState(0);var i=cc.find("player").getComponent("Player");if(i.materialUsed.delete(e),i.materialUsedClass.delete(t),"a"==t){var a="Canvas/container/c"+e.toString();cc.find(a).active=!1,2==e&&(this.progressBar.progress-=.33)}},checkMaterial:function(){var e=cc.find("player").getComponent("Player"),t=!0,n=!1,i=void 0;try{for(var a,s=e.materialOwned[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){var o=a.value;this.setMaterialOwned(o)}}catch(e){n=!0,i=e}finally{try{!t&&s.return&&s.return()}finally{if(n)throw i}}var c=!0,r=!1,l=void 0;try{for(var u,d=e.materialUsed[Symbol.iterator]();!(c=(u=d.next()).done);c=!0){o=u.value;this.setMaterialUsed(o)}}catch(e){r=!0,l=e}finally{try{!c&&d.return&&d.return()}finally{if(r)throw l}}},setMaterialOwned:function(e){var t="Canvas/materialBackground/m"+e.toString()+"Button";cc.find(t+"/isOwned").active=!0},setMaterialUsed:function(e){var t="Canvas/materialBackground/m"+e.toString()+"Button";cc.find(t+"/isOwned").getComponent(cc.Sprite).setState(1)},coinAnimation:function(){var e=cc.find("Canvas/coin"),t=cc.sequence(cc.scaleTo(.3,.7),cc.scaleTo(.3,1),cc.scaleTo(.3,.7),cc.scaleTo(.3,1));e.runAction(t)},resetScene:function(){var e=cc.find("player").getComponent("Player");e.materialUsed.clear(),e.materialUsedClass.clear()},start:function(){}}),cc._RF.pop()},{}],DoQuiz:[function(e,t,n){"use strict";cc._RF.push(t,"6123btancpBZ6XG0+aHDpyB","DoQuiz"),cc.Class({extends:cc.Component,properties:{nameLabel:{default:null,type:cc.Label},coinLabel:cc.Label,avatarSprite:{default:null,type:cc.Sprite},hintLabel:cc.Label,userAnswerChoice:0,questionLabel:cc.Label,option1Label:cc.Label,option2Label:cc.Label,option3Label:cc.Label,option4Label:cc.Label,currentOrder:1,answerToggleContainer:cc.ToggleContainer,mcqData:cc.JsonAsset,currentAnswerChoice:1},onLoad:function(){var e=cc.find("player").getComponent("Player");this.nameLabel.string=e.nickName,this.coinLabel.string=e.coinsOwned.toString(),this.hintLabel.string="";var t=this;cc.loader.loadRes(e.avatarImgDir+"_s",cc.SpriteFrame,function(e,n){t.avatarSprite.spriteFrame=n}),cc.loader.loadRes("mcq",function(e,n){e?console.log(e):(t.mcqData=n,t.loadMCQ(t.currentOrder))})},start:function(){},loadMCQ:function(e){this.questionLabel.string=this.mcqData.json[e].question,this.option1Label.string=this.mcqData.json[e].option1,this.option2Label.string=this.mcqData.json[e].option2,this.option3Label.string=this.mcqData.json[e].option3,this.option4Label.string=this.mcqData.json[e].option4,cc.find("Canvas/answerToggleContainer/toggle1").getComponent(cc.Toggle).isChecked=!1,cc.find("Canvas/answerToggleContainer/toggle2").getComponent(cc.Toggle).isChecked=!1,cc.find("Canvas/answerToggleContainer/toggle3").getComponent(cc.Toggle).isChecked=!1,cc.find("Canvas/answerToggleContainer/toggle4").getComponent(cc.Toggle).isChecked=!1,this.userAnswerChoice=0},submitAnswer:function(){var e=cc.find("player").getComponent("Player");this.userAnswerChoice==this.mcqData.json[this.currentOrder].answerOrder?(this.hintLabel.string=this.mcqData.json[this.currentOrder].correctHint,this.coinAnimation(),e.coinsOwned+=50,this.coinLabel.string=e.coinsOwned.toString(),cc.find("Canvas/submitButton").getComponent(cc.Button).interactable=!1):0==this.userAnswerChoice?Alert.show(1,"\u63d0\u793a","\u8bf7\u9009\u62e9\u4e00\u4e2a\u7b54\u6848",null,!1):(this.hintLabel.string=this.mcqData.json[this.currentOrder].wrongHint,cc.find("Canvas/submitButton").getComponent(cc.Button).interactable=!1)},coinAnimation:function(){var e=cc.find("Canvas/coin"),t=cc.sequence(cc.scaleTo(.3,.7),cc.scaleTo(.3,1),cc.scaleTo(.3,.7),cc.scaleTo(.3,1));e.runAction(t)},goToNextQuestion:function(){this.hintLabel.string="",this.currentOrder+=1,this.loadMCQ(this.currentOrder),cc.find("Canvas/submitButton").getComponent(cc.Button).interactable=!0},changeAnswer:function(e,t){this.userAnswerChoice=e.node._name.replace("toggle","")},backToMapScene:function(){cc.director.loadScene("LevelMap")}}),cc._RF.pop()},{}],Global:[function(e,t,n){"use strict";cc._RF.push(t,"97f75/LosdJbpMr5l/nUh3m","Global"),window.G={globalSocket:null,user:null,sequenceCnt:0,isNewUser:!1,isDiffDone:!1,isOsmoDone:!1,isBanaDone:!1,isQuizOpen:!1},window.insertNewAction=function(e,t,n,i,a,s,o,c,r){var l={username:t,sequenceID:n,stage:i,actionType:a,operatedItem:s,rewardType:o,rewardQty:c,totalCoins:r};e.emit("newAction",l),G.sequenceCnt=n+1},cc._RF.pop()},{}],LevelMap:[function(e,t,n){"use strict";cc._RF.push(t,"f9f88DE3JFF9IHNf9zR9atg","LevelMap"),cc.Class({extends:cc.Component,properties:{nameLabel:{default:null,type:cc.Label},coinLabel:cc.Label,avatarSprite:{default:null,type:cc.Sprite},standSprite:{default:null,type:cc.Sprite}},onLoad:function(){var e=cc.find("player").getComponent("Player");this.nameLabel.string=e.nickName,this.coinLabel.string=e.coinsOwned.toString(),e.coinsOwned>151?G.isQuizOpen=!1:G.isQuizOpen=!0;var t=this;cc.loader.loadRes(e.avatarImgDir,cc.SpriteFrame,function(e,n){t.standSprite.spriteFrame=n}),cc.loader.loadRes(e.avatarImgDir+"_s",cc.SpriteFrame,function(e,n){t.avatarSprite.spriteFrame=n}),G.isNewUser&&(console.log("fsdfsdf"),Alert.show(1.5,"\u6b22\u8fce\u6765\u5230\u65e0\u5c3d\u4e4b\u5c9b","\u65e0\u5c3d\u4e4b\u5c9b\u5305\u542b\u4e09\u4e2a\u5173\u5361\uff0c\u8bf7\u4ece\u6269\u6563\u5b9e\u9a8c\u5f00\u59cb\u73a9\u8d77\uff0c\u8d5a\u53d6\u4f60\u7684\u91d1\u5e01\u5427\u3002\u5982\u91d1\u5e01\u4e0d\u591f\uff0c\u53ef\u4ee5\u505a\u6d4b\u9a8c\u5f97\u91d1\u5e01\u54e6\u3002",null,!1)),G.isNewUser=!1,this.levelAnimation()},start:function(){},levelAnimation:function(){var e=null;G.isDiffDone?G.isOsmoDone?G.isBanaDone?(cc.find("Canvas/diffButton/done").active=!0,cc.find("Canvas/osButton/done").active=!0,cc.find("Canvas/bananaButton/done").active=!0):(cc.find("Canvas/diffButton/done").active=!0,cc.find("Canvas/osButton/done").active=!0,e="Canvas/bananaButton/Background"):(cc.find("Canvas/diffButton/done").active=!0,e="Canvas/osButton/Background"):e="Canvas/diffButton/Background";var t=cc.repeatForever(cc.sequence(cc.scaleTo(1.5,.9),cc.scaleTo(1.5,.95)));cc.find(e).runAction(t);var n=cc.repeatForever(cc.sequence(cc.moveBy(2,cc.v2(-8,-3)),cc.moveBy(2,cc.v2(8,3))));cc.find("Canvas/cloudsSunBg").runAction(n);var i=cc.repeatForever(cc.sequence(cc.scaleTo(1.5,.85),cc.scaleTo(1.5,.95)));G.isQuizOpen?(cc.find("Canvas/quizButton").getComponent(cc.Button).interactable=!0,cc.find("Canvas/quizButton").runAction(i)):cc.find("Canvas/quizButton").getComponent(cc.Button).interactable=!1},goToDiffScene:function(){cc.director.loadScene("DoDiffusionTest")},goToOsmosisScene:function(){cc.director.loadScene("DoOsmosisTest")},goToBananaScene:function(){cc.director.loadScene("SaveBananaTree")},goToQuizScene:function(){cc.director.loadScene("DoQuiz")}}),cc._RF.pop()},{}],Player:[function(e,t,n){"use strict";cc._RF.push(t,"78e20iBzjdI5IKlaT6IseD6","Player"),cc.Class({extends:cc.Component,properties:{nickName:"",gender:"boy",avatarImgDir:"boy_0",coinsOwned:200,materialOwned:null,materialUsed:null,materialUsedClass:null},onLoad:function(){cc.game.addPersistRootNode(this.node),this.materialOwned=new Set,this.materialUsed=new Set,this.materialUsedClass=new Set},start:function(){},updateCoins:function(e){this.coinsOwned=this.coinsOwned+e,G.user.coins=this.coinsOwned,G.globalSocket.emit("updateCoins",{username:G.user.username,coins:G.user.coins})}}),cc._RF.pop()},{}],SaveBananaTree:[function(e,t,n){"use strict";cc._RF.push(t,"4e8beUo6sBKmYfgdYa7quCt","SaveBananaTree"),cc.Class({extends:cc.Component,properties:{nameLabel:{default:null,type:cc.Label},avatarSprite:{default:null,type:cc.Sprite},moveSprite:{default:null,type:cc.Sprite},leftButton:cc.Button,rightButton:cc.Button,increaseButton:cc.Button,decreaseButton:cc.Button,spriteScale:1,spritePos:cc.Vec2,spriteHalfWidth:0,leftLimit:0,rightLimit:0,maxSpriteScale:1,minSpriteScale:.2,stepSize:60},onLoad:function(){var e=cc.find("player").getComponent("Player");this.nameLabel.string=e.nickName;var t=this;cc.loader.loadRes(e.avatarImgDir,cc.SpriteFrame,function(e,n){t.moveSprite.spriteFrame=n}),cc.loader.loadRes(e.avatarImgDir+"_s",cc.SpriteFrame,function(e,n){t.avatarSprite.spriteFrame=n}),this.spritePos=cc.v2(this.moveSprite.node.x,this.moveSprite.node.y),this.spriteHalfWidth=this.moveSprite.node.width/2,this.leftLimit=this.moveSprite.node.x-this.spriteHalfWidth,this.rightLimit=300+this.spriteHalfWidth},start:function(){},moveToLeft:function(){var e=this.spritePos.x;(e-=this.stepSize*this.spriteScale)-this.spriteHalfWidth*this.spriteScale<this.leftLimit&&(e=this.leftLimit+this.spriteHalfWidth*this.spriteScale),this.spritePos=cc.v2(e,this.spritePos.y),this.moveSprite.node.position=cc.v2(this.spritePos)},moveToRight:function(){var e=this.spritePos.x;(e+=this.stepSize*this.spriteScale)+this.spriteHalfWidth*this.spriteScale>this.rightLimit&&(e=this.rightLimit-this.spriteHalfWidth*this.spriteScale),this.spritePos=cc.v2(e,this.spritePos.y),this.moveSprite.node.position=cc.v2(this.spritePos)},increaseSize:function(){var e=this.moveSprite.node.scale;(e+=.1)>this.maxSpriteScale&&(e=this.maxSpriteScale),this.spritePos.x+this.spriteHalfWidth*this.spriteScale>=this.rightLimit&&(e=this.moveSprite.node.scale),this.spritePos.x-this.spriteHalfWidth*this.spriteScale<=this.leftLimit&&(e=this.moveSprite.node.scale),this.spriteScale=e,this.moveSprite.node.scale=this.spriteScale},decreaseSize:function(){var e=this.moveSprite.node.scale;(e-=.1)<this.minSpriteScale&&(e=this.minSpriteScale),this.spriteScale=e,this.moveSprite.node.scale=this.spriteScale},backToMapScene:function(){cc.director.loadScene("LevelMap")},update:function(e){this.spriteScale>this.minSpriteScale?this.decreaseButton.interactable=!0:this.decreaseButton.interactable=!1,this.spriteScale<this.maxSpriteScale?this.increaseButton.interactable=!0:this.increaseButton.interactable=!1,this.spritePos.x-this.spriteHalfWidth*this.spriteScale>this.leftLimit?this.leftButton.interactable=!0:(this.leftButton.interactable=!1,this.increaseButton.interactable=!1),this.spritePos.x+this.spriteHalfWidth*this.spriteScale<this.rightLimit?this.rightButton.interactable=!0:(this.rightButton.interactable=!1,this.increaseButton.interactable=!1)}}),cc._RF.pop()},{}],SetAvatar:[function(e,t,n){"use strict";cc._RF.push(t,"82a83Mtt4NKPqqC6sQ8GU8M","SetAvatar"),cc.Class({extends:cc.Component,properties:{nameEditBox:{default:null,type:cc.EditBox},genderToggleContainer:{default:null,type:cc.ToggleContainer},frontSprite:{default:null,type:cc.Sprite},nextButton:{default:null,type:cc.Button},coinsLabel:cc.Label,currentGender:"boy",currentImgPosition:0,currentImgDir:"boy_0"},onLoad:function(){this.resetScene()},getInputName:function(){},changeAvatar:function(){var e=["boy_0","boy_1"];this.currentImgPosition+=1,this.currentImgPosition==e.length&&(this.currentImgPosition=0),"boy"==this.currentGender?this.currentImgDir=e[this.currentImgPosition]:"girl"==this.currentGender&&(this.currentImgDir=["girl_0","girl_1"][this.currentImgPosition]);var t=this;cc.loader.loadRes(this.currentImgDir,cc.SpriteFrame,function(e,n){t.frontSprite.spriteFrame=n})},changeGender:function(){this.genderToggleContainer.toggleItems[0].isChecked?this.currentGender="boy":this.genderToggleContainer.toggleItems[1].isChecked&&(this.currentGender="girl"),this.currentImgPosition=-1,this.changeAvatar()},resetScene:function(){this.currentGender="boy",this.currentImgPosition=0,this.currentImgDir="boy_0",this.nameEditBox.string="",this.genderToggleContainer.toggleItems[0].isChecked=!0,this.changeGender(),this.coinsLabel.string="200",this.nextButton.interactable=!1},goToNextScene:function(){if(0==this.nameEditBox.string.length||0==this.nameEditBox.string.trim().length)console.log("Empty name input.");else{var e=cc.find("player").getComponent("Player");e.nickName=this.nameEditBox.string,e.gender=this.currentGender,e.avatarImgDir=this.currentImgDir,e.coinsOwned=200,G.user.nickname=e.nickName,G.user.sex=e.gender,G.user.coins=e.coinsOwned.toString(),G.user.whichavatar=e.avatarImgDir.substring(e.avatarImgDir.length-1),G.globalSocket.emit("newUser",G.user),G.globalSocket.on("newUser",function(e){"success"==e?cc.director.loadScene("LevelMap"):"failure"==e&&cc.log("Fail to register, try again later.")})}},start:function(){},update:function(e){0==this.nameEditBox.string.length||0==this.nameEditBox.string.trim().length?this.nextButton.interactable=!1:this.nextButton.interactable=!0}}),cc._RF.pop()},{}],StarGame:[function(e,t,n){"use strict";cc._RF.push(t,"ea8f5djBEpGuaWin7QDBo/U","StarGame"),cc.Class({extends:cc.Component,properties:{startButton:{default:null,type:cc.Button},textLabel:cc.Label},onLoad:function(){G.globalSocket=io.connect("http://13.229.231.71:3000",{reconnect:!0}),G.globalSocket.on("connect",function(){console.log("You have been connected")}),G.globalSocket.on("connect_error",function(){console.log("connect_error"),Alert.show(1,"\u7f51\u7edc\u9519\u8bef","\u540e\u53f0\u670d\u52a1\u5668\u5df2\u5173\u95ed\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458",null,!1)}),G.globalSocket.on("disconnect",function(){console.log("You have been disconnected")}),G.globalSocket.on("reconnect",function(){console.log("You have been reconnected")}),G.globalSocket.on("reconnect_error",function(){console.log("Attempt to reconnect has failed")});var t=e("user");G.user=new t("","","","","")},onTextChanged:function(e,t){if(/^[A-Za-z0-9]*$/.test(this.textLabel.string));else{var n=this.textLabel.string.substring(0,this.textLabel.string.length-1);cc.find("Canvas/usernameEditBox").getComponent(cc.EditBox).string=n,cc.find("Canvas/usernameEditBox").getComponent(cc.EditBox).blur(),cc.find("Canvas/usernameEditBox").getComponent(cc.EditBox).focus()}this.textLabel.string.length>=4?this.startButton.interactable=!0:this.startButton.interactable=!1},goToNextScene:function(){G.user.username=this.textLabel.string,G.globalSocket.emit("login",G.user),G.globalSocket.on("login",function(e){if("new"==e)G.isNewUser=!0,cc.director.loadScene("SetAvatar");else if("multiple"==e)console.log("Multiple userinfor are detected.");else if("reject"==e)console.log("This username is used by others now, please change another one."),cc.find("Canvas/usernameEditBox").getComponent(cc.EditBox).string="",cc.find("Canvas/usernameEditBox").getComponent(cc.EditBox).blur(),cc.find("Canvas/usernameEditBox").getComponent(cc.EditBox).focus();else{console.log("user existed."),G.isNewPlayer=!1,G.user.username=e.username,G.user.nickname=e.nickname,G.user.sex=e.sex,G.user.coins=e.coins,G.user.whichavatar=e.whichavatar;var t=cc.find("player").getComponent("Player");t.nickName=G.user.nickname,t.gender=G.user.sex,t.coinsOwned=Number(G.user.coins),t.avatarImgDir=t.gender+"_"+G.user.whichavatar,cc.director.loadScene("LevelMap")}})},start:function(){}}),cc._RF.pop()},{user:"user"}],user:[function(e,t,n){"use strict";cc._RF.push(t,"04827FGzH1Bj7Rbk2rLy1D6","user"),t.exports=function(e,t,n,i,a){this.username=e,this.nickname=t,this.sex=n,this.coins=i,this.whichavatar=a},cc._RF.pop()},{}]},{},["DoDiffusionTest","DoOsmosisTest","DoQuiz","LevelMap","Player","SaveBananaTree","SetAvatar","StarGame","Global","user"]);